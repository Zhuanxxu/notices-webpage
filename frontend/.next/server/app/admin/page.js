(()=>{var e={};e.id=3,e.ids=[3],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},66715:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o});var r=s(7),a=s(8533),i=s(29377),n=s.n(i),l=s(29799),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,16670)),"D:\\Programacion Codigo\\Pagina Noticias - lu brai\\frontend\\app\\admin\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,62718)),"D:\\Programacion Codigo\\Pagina Noticias - lu brai\\frontend\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,59224)),"D:\\Programacion Codigo\\Pagina Noticias - lu brai\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,73472,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Programacion Codigo\\Pagina Noticias - lu brai\\frontend\\app\\admin\\page.tsx"],x="/admin/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},18403:(e,t,s)=>{Promise.resolve().then(s.bind(s,98946))},94278:(e,t,s)=>{Promise.resolve().then(s.bind(s,33798))},1495:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,45483,23)),Promise.resolve().then(s.t.bind(s,46544,23)),Promise.resolve().then(s.t.bind(s,17680,23)),Promise.resolve().then(s.t.bind(s,24138,23)),Promise.resolve().then(s.t.bind(s,38705,23)),Promise.resolve().then(s.t.bind(s,57974,23))},7369:()=>{},98946:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(54714),a=s(88934),i=s(22633),n=s(77580),l=s(35070),d=s.n(l);function o({children:e}){let t=(0,a.useRouter)(),s=(0,a.usePathname)(),[l,o]=(0,n.useState)(i.O.getUser());return(0,n.useEffect)(()=>{"/admin/login"===s||i.O.isAuthenticated()||t.push("/admin/login")},[t,s]),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("nav",{className:"bg-white shadow-sm",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0 flex items-center",children:r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Panel de Administraci\xf3n"})}),(0,r.jsxs)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[r.jsx(d(),{href:"/admin",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${"/admin"===s?"border-indigo-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:"Dashboard"}),r.jsx(d(),{href:"/admin/articles",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${s?.startsWith("/admin/articles")?"border-indigo-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:"Noticias"}),r.jsx(d(),{href:"/admin/media-sources",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${s?.startsWith("/admin/media-sources")?"border-indigo-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:"Medios"})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-sm text-gray-700 mr-4",children:l?.email}),r.jsx("button",{onClick:()=>{i.O.logout(),t.push("/admin/login")},className:"text-sm text-gray-500 hover:text-gray-700",children:"Cerrar Sesi\xf3n"})]})]})})}),r.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:e})]})}function c({children:e}){let t=(0,a.useRouter)(),[s,l]=(0,n.useState)(!0),[d,o]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{(async()=>{if(!i.O.isAuthenticated()){t.push("/admin/login"),l(!1);return}try{await i.O.getCurrentUser(),o(!0)}catch(e){i.O.logout(),t.push("/admin/login")}finally{l(!1)}})()},[t]),s)?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando..."})]})}):d?r.jsx(r.Fragment,{children:e}):null}function x({children:e}){return"/admin/login"===(0,a.usePathname)()?r.jsx(r.Fragment,{children:e}):r.jsx(c,{children:r.jsx(o,{children:e})})}},33798:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(54714),a=s(77580),i=s(35070),n=s.n(i),l=s(10255);function d(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[d,o]=(0,a.useState)({total:0,published:0,draft:0});(0,a.useEffect)(()=>{c()},[]);let c=async()=>{try{let e=await l.Z.get("/articles?limit=10");t(e.data);let s=e.data.filter(e=>"published"===e.status).length;o({total:e.data.length,published:s,draft:e.data.length-s})}catch(e){console.error("Error fetching articles:",e)}finally{i(!1)}},x=e=>e?new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"";return(0,r.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Resumen de noticias y estad\xedsticas"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:r.jsx("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"text-2xl font-bold text-gray-900",children:d.total})}),r.jsx("div",{className:"ml-5 w-0 flex-1",children:r.jsx("dl",{children:r.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total de Noticias"})})})]})})}),r.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:r.jsx("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"text-2xl font-bold text-green-600",children:d.published})}),r.jsx("div",{className:"ml-5 w-0 flex-1",children:r.jsx("dl",{children:r.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Publicadas"})})})]})})}),r.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:r.jsx("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:d.draft})}),r.jsx("div",{className:"ml-5 w-0 flex-1",children:r.jsx("dl",{children:r.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Borradores"})})})]})})})]}),r.jsx("div",{className:"bg-white shadow rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Noticias Recientes"}),r.jsx(n(),{href:"/admin/articles",className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Ver todas â†’"})]}),s?r.jsx("div",{className:"text-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"})}):0===e.length?(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{children:"No hay noticias a\xfan"}),r.jsx(n(),{href:"/admin/articles/new",className:"mt-4 inline-block text-indigo-600 hover:text-indigo-800",children:"Crear primera noticia"})]}):r.jsx("div",{className:"space-y-4",children:e.map(e=>r.jsx("div",{className:"border-b border-gray-200 pb-4 last:border-0 last:pb-0",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx(n(),{href:`/admin/articles/${e.id}/edit`,className:"text-lg font-medium text-gray-900 hover:text-indigo-600",children:e.title}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:x(e.created_at)})]}),r.jsx("div",{className:"ml-4",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${"published"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:"published"===e.status?"Publicada":"Borrador"})})]})},e.id))})]})})]})}},10255:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let r=s(7059).Z.create({baseURL:"http://localhost:3001/api",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>e),r.interceptors.response.use(e=>e,e=>(e.response?.status,Promise.reject(e)));let a=r},22633:(e,t,s)=>{"use strict";s.d(t,{O:()=>a});var r=s(10255);let a={async login(e,t){let s=await r.Z.post("/auth/login",{email:e,password:t});return s.data.token&&(localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user))),s.data},async register(e,t,s="editor"){let a=await r.Z.post("/auth/register",{email:e,password:t,role:s});return a.data.token&&(localStorage.setItem("token",a.data.token),localStorage.setItem("user",JSON.stringify(a.data.user))),a.data},getCurrentUser:async()=>(await r.Z.get("/auth/me")).data.user,logout(){localStorage.removeItem("token"),localStorage.removeItem("user")},getToken:()=>null,getUser:()=>null,isAuthenticated(){return null!==this.getToken()}}},62718:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(71481).createProxy)(String.raw`D:\Programacion Codigo\Pagina Noticias - lu brai\frontend\app\admin\layout.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default},16670:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>n});let r=(0,s(71481).createProxy)(String.raw`D:\Programacion Codigo\Pagina Noticias - lu brai\frontend\app\admin\page.tsx`),{__esModule:a,$$typeof:i}=r,n=r.default},59224:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>n});var r=s(40657),a=s(24376),i=s.n(a);s(40642);let n={title:"P\xe1gina de Noticias",description:"Web de noticias autogestionable estilo Ground.news"};function l({children:e}){return r.jsx("html",{lang:"es",children:r.jsx("body",{className:i().className,children:e})})}},40642:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[739,921,708],()=>s(66715));module.exports=r})();