(()=>{var e={};e.id=403,e.ids=[403],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},84143:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var a=r(7),s=r(8533),i=r(29377),o=r.n(i),n=r(29799),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d=["",{children:["admin",{children:["articles",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,24581)),"D:\\Programacion Codigo\\Pagina Noticias - lu brai\\frontend\\app\\admin\\articles\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,62718)),"D:\\Programacion Codigo\\Pagina Noticias - lu brai\\frontend\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,59224)),"D:\\Programacion Codigo\\Pagina Noticias - lu brai\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,73472,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Programacion Codigo\\Pagina Noticias - lu brai\\frontend\\app\\admin\\articles\\new\\page.tsx"],u="/admin/articles/new/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/articles/new/page",pathname:"/admin/articles/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},68582:(e,t,r)=>{Promise.resolve().then(r.bind(r,31617))},18403:(e,t,r)=>{Promise.resolve().then(r.bind(r,98946))},1495:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,45483,23)),Promise.resolve().then(r.t.bind(r,46544,23)),Promise.resolve().then(r.t.bind(r,17680,23)),Promise.resolve().then(r.t.bind(r,24138,23)),Promise.resolve().then(r.t.bind(r,38705,23)),Promise.resolve().then(r.t.bind(r,57974,23))},7369:()=>{},31617:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(54714),s=r(77580),i=r(88934),o=r(10255);function n(){let e=(0,i.useRouter)(),[t,r]=(0,s.useState)(!1),[n,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)(null),[u,m]=(0,s.useState)([]),[x,g]=(0,s.useState)([]),[p,h]=(0,s.useState)({title:"",content:"",excerpt:"",editor_content:"",status:"draft",political_bias:"",location:""});(0,s.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=await o.Z.get("/tags");m(e.data)}catch(e){console.error("Error fetching tags:",e)}},f=async e=>{let t=e.target.files?.[0];if(t){l(!0);try{let e=new FormData;e.append("image",t);let r=localStorage.getItem("token"),a=await fetch("http://localhost:3001/api/upload",{method:"POST",headers:{Authorization:`Bearer ${r}`},body:e});if(!a.ok)throw Error("Error al subir la imagen");let s=await a.json();c(s.filePath)}catch(e){console.error("Error uploading image:",e),alert("Error al subir la imagen")}finally{l(!1)}}},y=async t=>{t.preventDefault(),r(!0);try{let t={title:p.title,content:p.content,status:p.status};p.editor_content&&(t.editor_content=p.editor_content),d&&(t.cover_image=d),p.political_bias&&(t.political_bias=p.political_bias),p.location&&(t.location=p.location),x.length>0&&(t.tag_ids=x);let r=await o.Z.post("/articles",t);e.push(`/admin/articles/${r.data.id}/edit`)}catch(e){console.error("Error creating article:",e),alert(e.response?.data?.error||"Error al crear la noticia")}finally{r(!1)}};return(0,a.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Nueva Noticia"}),a.jsx("form",{onSubmit:y,className:"bg-white shadow rounded-lg p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"T\xedtulo *"}),a.jsx("input",{type:"text",id:"title",required:!0,value:p.title,onChange:e=>h({...p,title:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"excerpt",className:"block text-sm font-medium text-gray-700",children:"Subt\xedtulo / Breve Descripci\xf3n"}),a.jsx("textarea",{id:"excerpt",rows:3,value:p.excerpt,onChange:e=>h({...p,excerpt:e.target.value}),placeholder:"Breve descripci\xf3n que aparecer\xe1 en la p\xe1gina principal (opcional)",maxLength:500,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}),(0,a.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[p.excerpt.length,"/500 caracteres"]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Contenido *"}),a.jsx("textarea",{id:"content",required:!0,rows:10,value:p.content,onChange:e=>h({...p,content:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"cover_image",className:"block text-sm font-medium text-gray-700",children:"Foto de Portada"}),a.jsx("input",{type:"file",id:"cover_image",accept:"image/*",onChange:f,disabled:n,className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),n&&a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Subiendo imagen..."}),d&&a.jsx("div",{className:"mt-4",children:a.jsx("img",{src:`http://localhost:3001${d}`,alt:"Vista previa",className:"max-w-md h-48 object-cover rounded-lg border border-gray-300"})})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"editor_content",className:"block text-sm font-medium text-gray-700",children:"Redacci\xf3n Editorial"}),a.jsx("textarea",{id:"editor_content",rows:6,value:p.editor_content,onChange:e=>h({...p,editor_content:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"An\xe1lisis o redacci\xf3n propia del editor..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Estado"}),(0,a.jsxs)("select",{id:"status",value:p.status,onChange:e=>h({...p,status:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"draft",children:"Borrador"}),a.jsx("option",{value:"published",children:"Publicada"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"political_bias",className:"block text-sm font-medium text-gray-700",children:"Sesgo Pol\xedtico"}),(0,a.jsxs)("select",{id:"political_bias",value:p.political_bias,onChange:e=>h({...p,political_bias:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"",children:"Sin clasificar"}),a.jsx("option",{value:"left",children:"Izquierda"}),a.jsx("option",{value:"center",children:"Centro"}),a.jsx("option",{value:"right",children:"Derecha"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"Ubicaci\xf3n (Ciudad o Provincia)"}),a.jsx("input",{type:"text",id:"location",value:p.location,onChange:e=>h({...p,location:e.target.value}),placeholder:"Ej: Buenos Aires, C\xf3rdoba, etc.",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags / Categor\xedas"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:u.map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2 p-2 border border-gray-300 rounded-md hover:bg-gray-50 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:x.includes(e.id),onChange:t=>{t.target.checked?g([...x,e.id]):g(x.filter(t=>t!==e.id))},className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:e.name})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>e.back(),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:t,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50",children:t?"Guardando...":"Guardar"})]})]})})]})}},98946:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(54714),s=r(88934),i=r(22633),o=r(77580),n=r(35070),l=r.n(n);function d({children:e}){let t=(0,s.useRouter)(),r=(0,s.usePathname)(),[n,d]=(0,o.useState)(i.O.getUser());return(0,o.useEffect)(()=>{"/admin/login"===r||i.O.isAuthenticated()||t.push("/admin/login")},[t,r]),(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-white shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0 flex items-center",children:a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Panel de Administraci\xf3n"})}),(0,a.jsxs)("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[a.jsx(l(),{href:"/admin",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${"/admin"===r?"border-indigo-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:"Dashboard"}),a.jsx(l(),{href:"/admin/articles",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${r?.startsWith("/admin/articles")?"border-indigo-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:"Noticias"}),a.jsx(l(),{href:"/admin/media-sources",className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${r?.startsWith("/admin/media-sources")?"border-indigo-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:"Medios"})]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-sm text-gray-700 mr-4",children:n?.email}),a.jsx("button",{onClick:()=>{i.O.logout(),t.push("/admin/login")},className:"text-sm text-gray-500 hover:text-gray-700",children:"Cerrar Sesi\xf3n"})]})]})})}),a.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:e})]})}function c({children:e}){let t=(0,s.useRouter)(),[r,n]=(0,o.useState)(!0),[l,d]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{(async()=>{if(!i.O.isAuthenticated()){t.push("/admin/login"),n(!1);return}try{await i.O.getCurrentUser(),d(!0)}catch(e){i.O.logout(),t.push("/admin/login")}finally{n(!1)}})()},[t]),r)?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando..."})]})}):l?a.jsx(a.Fragment,{children:e}):null}function u({children:e}){return"/admin/login"===(0,s.usePathname)()?a.jsx(a.Fragment,{children:e}):a.jsx(c,{children:a.jsx(d,{children:e})})}},10255:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let a=r(7059).Z.create({baseURL:"http://localhost:3001/api",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>e),a.interceptors.response.use(e=>e,e=>(e.response?.status,Promise.reject(e)));let s=a},22633:(e,t,r)=>{"use strict";r.d(t,{O:()=>s});var a=r(10255);let s={async login(e,t){let r=await a.Z.post("/auth/login",{email:e,password:t});return r.data.token&&(localStorage.setItem("token",r.data.token),localStorage.setItem("user",JSON.stringify(r.data.user))),r.data},async register(e,t,r="editor"){let s=await a.Z.post("/auth/register",{email:e,password:t,role:r});return s.data.token&&(localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user))),s.data},getCurrentUser:async()=>(await a.Z.get("/auth/me")).data.user,logout(){localStorage.removeItem("token"),localStorage.removeItem("user")},getToken:()=>null,getUser:()=>null,isAuthenticated(){return null!==this.getToken()}}},24581:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>s,default:()=>o});let a=(0,r(71481).createProxy)(String.raw`D:\Programacion Codigo\Pagina Noticias - lu brai\frontend\app\admin\articles\new\page.tsx`),{__esModule:s,$$typeof:i}=a,o=a.default},62718:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>s,default:()=>o});let a=(0,r(71481).createProxy)(String.raw`D:\Programacion Codigo\Pagina Noticias - lu brai\frontend\app\admin\layout.tsx`),{__esModule:s,$$typeof:i}=a,o=a.default},59224:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>o});var a=r(40657),s=r(24376),i=r.n(s);r(40642);let o={title:"P\xe1gina de Noticias",description:"Web de noticias autogestionable estilo Ground.news"};function n({children:e}){return a.jsx("html",{lang:"es",children:a.jsx("body",{className:i().className,children:e})})}},40642:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[739,921,708],()=>r(84143));module.exports=a})();