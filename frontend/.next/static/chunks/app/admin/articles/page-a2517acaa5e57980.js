(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[985],{5086:function(e,t,a){Promise.resolve().then(a.bind(a,8586))},8586:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var s=a(7821),i=a(8078),r=a(6871),n=a.n(r),c=a(6179),l=a(4417);function d(){(0,c.useRouter)();let[e,t]=(0,i.useState)([]),[a,r]=(0,i.useState)(!0),[d,o]=(0,i.useState)("all");(0,i.useEffect)(()=>{x()},[d]);let x=async()=>{try{let e="all"!==d?"?status=".concat(d):"",a=await l.Z.get("/articles".concat(e));t(a.data)}catch(e){console.error("Error fetching articles:",e)}finally{r(!1)}},m=async e=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar esta noticia?"))try{await l.Z.delete("/articles/".concat(e)),x()}catch(e){console.error("Error deleting article:",e),alert("Error al eliminar la noticia")}},h=e=>e?new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"";return(0,s.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Noticias"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Gestiona todas tus noticias"})]}),(0,s.jsx)(n(),{href:"/admin/articles/new",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700",children:"Nueva Noticia"})]}),(0,s.jsxs)("div",{className:"mb-4 flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>o("all"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("all"===d?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Todas"}),(0,s.jsx)("button",{onClick:()=>o("published"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("published"===d?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Publicadas"}),(0,s.jsx)("button",{onClick:()=>o("draft"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("draft"===d?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Borradores"})]}),a?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"})}):0===e.length?(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-8 text-center",children:[(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"No hay noticias"}),(0,s.jsx)(n(),{href:"/admin/articles/new",className:"text-indigo-600 hover:text-indigo-800",children:"Crear primera noticia"})]}):(0,s.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"T\xedtulo"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("published"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:"published"===e.status?"Publicada":"Borrador"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h(e.created_at)}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,s.jsx)(n(),{href:"/admin/articles/".concat(e.id,"/edit"),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Editar"}),(0,s.jsx)("button",{onClick:()=>m(e.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},e.id))})]})})]})}},4417:function(e,t,a){"use strict";let s=a(1892).Z.create({baseURL:"".concat("http://localhost:3001","/api"),headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),s.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/admin/login"),Promise.reject(e)}),t.Z=s},6871:function(e,t,a){e.exports=a(1844)},6179:function(e,t,a){e.exports=a(319)}},function(e){e.O(0,[885,844,115,141,744],function(){return e(e.s=5086)}),_N_E=e.O()}]);